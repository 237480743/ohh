<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="HandheldFriendly" content="true">
    <meta name="MobileOptimized" content="320">
    <meta name="screen-orientation" content="portrait">
    <meta name="x5-orientation" content="portrait">
    <meta name="full-screen" content="yes">
    <meta name="x5-fullscreen" content="true">
    <meta name="browsermode" content="application">
    <meta name="x5-page-mode" content="app">
    <title>首页</title>
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" href="css/sidenav.min.css" type="text/css">
    <link rel="stylesheet" href="css/swiper.min.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <script src="js/swiper.min.js"></script>
    <script src="js/jquery.min.js"></script> 

</head>
<body>
    <div class="menu">
        <!-- page1 -->
    <div id="c1" class="page1">
        <div class="popbg">
        </div>
        <div class="header">
            <div class="title">
                <a href="javascript:;" class="toggle sidenav-toggle">
	                <i class="material-icons"></i>
	            </a>
                小王的家
            </div>
            <a href="roomadd.html" class="roomadd"></a>
            <div class="nav-w">
                <div id="topNav" class="nav swiper-container">
                    <ul class="swiper-wrapper">
                        <li class="swiper-slide active frequent">常用</li>
                        <li class="swiper-slide">卧室</li>
                        <li class="swiper-slide">客厅</li>
                        <li class="swiper-slide">厨房</li>
                        <li class="swiper-slide">走廊</li>
                        <li class="swiper-slide">次卧</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="banner">
            <div class="data">
                <div class="dataleft">
                    <div class="num">
                        33
                        <span></span>
                        <p class="wd">室外温度</p> 
                    </div>                                          
                </div>
                <div class="dataright">
                    <div class="num">
                        23
                        <span></span>
                        <p class="wd">室内温度</p>
                    </div>                                       
                </div>
                <div class="location"><a href="">
                    <span class="address"></span>&nbsp;
                    <span>西安市&nbsp;&gt;</span></a>   
                </div>
            </div>
        </div>
        <div class="pop">
            <div class="poptitle"><span>添加快捷按键</span><div class="popdel"></div></div>
            <form class="popinput" method="post" action="">
                <div>
                    <label>按键名称</label>
                    <input type="text" name="" style="padding-left:1.8rem;" placeholder="回家" maxlength="5" required oninvalid="setCustomValidity('请输入按键名称');" oninput="setCustomValidity('');">
                </div>
                <div>
                    <label>绑定手机</label>
                    <input type="text" name="" style="padding-left:1.8rem;" maxlength="11" required oninvalid="setCustomValidity('请输入绑定手机');" oninput="setCustomValidity('');"> 
                </div>
                <input type="submit" value="确定" class="popsubmit">
            </form> 
        </div>
        <div class="pop2">
            <div class="poptitle"><span>添加设备</span><div class="popdel"></div></div>
            <form>
                <a href="device.html"><div>添加设备</div></a>
                <a href="customdev.html"><div>自定义设备</div></a>
                <div class="deldevice">删除设备</div>
            </form> 
        </div>
        <ul class="cont">
            <li class="show ul">
                <div class="shortcut"><a href="#">
                    <div class="img-box" style="background:url(images/icon2/2-7.png) no-repeat;background-size:.8rem;"></div>
                    <p>游戏</p>
                    <span class="deleteq"></span></a>
                </div>
                <div class="shortcut"><a href="#">
                    <div class="img-box" style="background:url(images/icon2/2-8.png) no-repeat;background-size:.8rem;"></div>
                    <p>出门</p>
                    <span class="deleteq"></span></a>
                </div>
                <div class="shortcutflip">
                    <div class="shortcutfront">
                        <div class="img-box2"></div>
                    </div>
                    <div class="shortcutback">
                        <div class="backadd">添加快捷键</div>
                        <div class="backdeleteq">删除快捷键</div>
                    </div>
                </div>
            </li>
            <li class="hide ul">
                <div class="itemfumn">
                    <div class="img-box2"></div>
                </div> 
            </li>
            <li class="hide ul">
                <div class="itemfumn">
                    <div class="img-box2"></div>
                </div> 
            </li>
            <li class="hide ul">
                <div class="itemfumn">
                    <div class="img-box2"></div>
                </div> 
            </li>
            <li class="hide ul">
                <div class="itemfumn">
                    <div class="img-box2"></div>
                </div> 
            </li>
            <li class="hide ul">
                <div class="itemfumn">
                    <div class="img-box2"></div>
                </div> 
            </li>
        </ul>
    </div>
        <!-- page2 -->
    <div id="c2" class="page2 indexhide" >
        <div class="speak_window">
	        <div class="speak_box">
		        <div class="answer">
			        <div class="heard_img left"></div>
			        <div class="answer_text">
				        <p>1</p>
				        <i></i>
			        </div>
		        </div>
	        </div>
        </div>
        <div class="saying">
	        <img src="images/saying.gif">
        </div>
        <div class="wenwen-footer">
	        <div class="wenwen_btn left" onClick="to_write()"><img src="images/jp_btn.png"></div>
	        <div class="wenwen_text left">
	            <div class="write_box">
	                <input type="text" class="left" onKeyUp="keyup()" />
	            </div>   
	            <div class="circle-button" id="wenwen">
	                按住 说话
	            </div>
	        </div>
	        <div class="wenwen_help right">
	            <button onClick="up_say()" class="right">发送</button>
	        </div>
	        <div style="opacity:0;" class="clear"></div>
        </div>    

        <!-- <div class="saying">
	        <img src="images/saying.gif">
        </div>   -->
        <div class="towrite" onclick="to_write()"></div>
        <div class="write">
            <div></div>
            <!-- <form action="">
                <input id="writeinput" type="text" style="padding-left: .2rem">
                <button onclick="up_say()" class="right">发送</button>
            </form> -->
        </div> 
    </div>
        <!-- page3 -->
    <div id="c3" class="page indexhide">
        <div class="header">
            <div class="title">
                <a href="javascript:;" class="toggle sidenav-toggle">
	                <i class="material-icons"></i>
	            </a>
                智慧管家
            </div>
        </div>
        <div class="banner3">
        </div>
        <div class="cont3">
            <div class="show3">
                <div class="item3">
                    <span class="delete"></span> 
                    <a href="#"><div class="front3">
                        <div class="img-box" style="background:url(images/icon2/2-5.png) no-repeat;background-size:.8rem;">
                        </div>
                        <p>回家</p>
                    </div></a>    
                    <div class="back3">
                        <div class="back-edit3">查看指令</div>
                        <div class="back-revise3">智能执行</div>
                    </div> 
                </div>
                <div class="item3">
                    <span class="delete"></span> 
                    <a href="#"><div class="front3">
                        <div class="img-box" style="background:url(images/icon2/2-1.png) no-repeat;background-size:.8rem;">
                        </div>
                        <p>学习</p>
                    </div></a>
                        <div class="back3">
                        <div class="back-edit3">查看指令</div>
                        <div class="back-revise3">智能执行</div>
                    </div>
                </div>
                <div class="item3">
                    <span class="delete"></span> 
                    <a href="#"><div class="front3">
                        <div class="img-box" style="background:url(images/icon2/2-4.png) no-repeat;background-size:.8rem;">
                        </div>
                        <p>睡觉</p>
                    </div></a>
                    <div class="back3">
                        <div class="back-edit3">查看指令</div>
                        <div class="back-revise3">智能执行</div>
                    </div>
                </div>
                <div class="item3">
                    <span class="delete"></span> 
                    <a href="#"><div class="front3">
                        <div class="img-box" style="background:url(images/icon2/2-3.png) no-repeat;background-size:.8rem;">
                        </div>
                        <p>吃饭</p>
                    </div></a>
                    <div class="back3">
                        <div class="back-edit3">查看指令</div>
                        <div class="back-revise3">智能执行</div>
                    </div>
                </div>
                <div class="item3">
                    <span class="delete"></span> 
                    <a href="#"><div class="front3">
                        <div class="img-box" style="background:url(images/icon2/2-2.png) no-repeat;background-size:.8rem;">
                        </div>
                        <p>工作</p>
                    </div></a>
                    <div class="back3">
                        <div class="back-edit3">查看指令</div>
                        <div class="back-revise3">智能执行</div>
                    </div>
                </div>
                <div class="item3">
                    <span class="delete"></span> 
                    <a href="#"><div class="front3">
                        <div class="img-box" style="background:url(images/icon2/2-7.png) no-repeat;background-size:.8rem;">
                        </div>
                        <p>休闲</p>
                    </div></a>            
                    <div class="back3">
                        <div class="back-edit3">查看指令</div>
                        <div class="back-revise3">智能执行</div>
                    </div>
                </div>
                <div class="itemfumn4 ">
                    <div class="front4">
                        <div class="img-box3"></div>
                    </div>
                    <div class="back4">
                        <div class="backadd4">添加指令</div>
                        <div class="backdelete4">删除指令</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <footer class="footer">
        <div xxx="c1" class="my-device indexcurrent" onclick="Tab(this);">
            <div class="device">
                <span></span>
                <p>我的设备</p>
            </div>
            <div class="frequently">
                <span></span>
                <p>快捷操作</p>
            </div>
        </div>
        <div xxx="c2" class="my-device vedio" onclick="Tab(this);">
            <div class="video">
                <span></span>
            </div>
        </div>
        <div xxx="c3" class="my-device footercolor" onclick="Tab(this);">
            <span></span>
            <p>智慧管家</p>
        </div>

    </footer>

    <div class="sidebg"></div>
	<nav class="sidenav" data-sidenav data-sidenav-toggle=".sidenav-toggle">
	    <div class="sidenav-brand">
            <div class="gravatar"></div>
            <div class="name">文艺的名字</div>
            <div class="phone-number">12345678</div>
	    </div>
	    <ul class="sidenav-menu">
            <li>
	            <a href="" data-sidenav-dropdown-toggle class="active">
	                <span class="sidenav-link-icon">
	                    <div class="icon-a-2"></div>
	                </span>
	            <span class="sidenav-link-title">常见问题</span>
	            <span class="sidenav-dropdown-icon show" data-sidenav-dropdown-icon>
	                <div class="icon-b-1"></div>
	            </span>
	            </a>
            </li>
            <li>
	            <a href="about.html">
	                <span class="sidenav-link-icon">
	                    <div class="icon-a-3"></div>
	                </span>
                    <span class="sidenav-link-title">联系我们</span>
                    <span class="sidenav-dropdown-icon show" data-sidenav-dropdown-icon>
	                    <div class="icon-b-1"></div>
	                </span>
	            </a>
            </li>
            <li>
	            <a href="aboutme.html">
	                <span class="sidenav-link-icon">
	                    <div class="icon-a-4"></div>
	                </span>
                    <span class="sidenav-link-title">关于</span>
                    <span class="sidenav-dropdown-icon show" data-sidenav-dropdown-icon>
	                    <div class="icon-b-1"></div>
	                </span>
	            </a>
            </li>
            <br/>
            <li>
	            <a href="install.html">
	                <span class="sidenav-link-icon">
	                    <div class="icon-a-5"></div>
	                </span>
	                <span class="sidenav-link-title">设置</span>
                </a>
                <span class="sidenav-dropdown-icon show" data-sidenav-dropdown-icon>
	                <div class="icon-b-1"></div>
	            </span>
	        </li>
        </ul>
        <button type="button" class="sidenav-bottom">解除绑定</button>
    </nav>
</body>    

	<script src="js/sidenav.js"></script>
    <script src="js/touch.js"></script>
    <script src="js/index.js"></script>
    <script>

    // $.ajax({
    //     url:"JSON/item.json",
    //     cache:false,
    //     data:data,
    //     dataType:"text",
    //     type:"POST",
    //     success:function(data){
    //         closeDIV("addModel");
    //         openDIV("addProductModel");
    //         data=eval_r(""+data+"");
    //             $.each(data,function(index,item){
    //             temp="<option value='"+item.id+"'>"+item.stringStyle+"</option>";
    //             $("#producttimeStyleId").append(temp);
    //         });
    //     }
    // });
	function to_write(){
	    $('.wenwen_btn img').attr('src','images/yy_btn.png');
	    $('.wenwen_btn').attr('onclick','to_say()');
	    $('.write_box,.wenwen_help button').show();
	    $('.circle-button,.wenwen_help a').hide();
	    $('.write_box input').focus();
	    for_bottom();
	}

	function to_say(){
		$('.write_list').remove();
	    $('.wenwen_btn img').attr('src','images/jp_btn.png');
	    $('.wenwen_btn').attr('onclick','to_write()');
	    $('.write_box,.wenwen_help button').hide();
	    $('.circle-button,.wenwen_help a').show();
	}

	function up_say(){
		$('.write_list').remove();
	    var text = $('.write_box input').val(),
	        str  = '<div class="question">';
	        str += '<div class="heard_img right"><img src="images/dglvyou.jpg"></div>';
	        str += '<div class="question_text clear"><p>'+text+'</p><i></i>';
	        str += '</div></div>';

	    if(text == ''){
	        alert('请输入提问！');
	        $('.write_box input').focus();
	    }else{
	        $('.speak_box').append(str);
	        $('.write_box input').val('');
	        $('.write_box input').focus();
	        autoWidth();
	        for_bottom();
	        setTimeout(function(){
	            var ans  = '<div class="answer"><div class="heard_img left"><img src="images/dglvyou.jpg"></div>';
	            	ans += '<div class="answer_text"><p>您发送的文字是：'+text+'</p><i></i>';
	        		ans += '</div></div>';
	        	$('.speak_box').append(ans);
				for_bottom();
	        },1000);
	    }
	}

	function keyup(){
		var footer_height = $('.wenwen-footer').outerHeight(),
			text = $('.write_box input').val(),
			str = '<div class="write_list">'+text+'</div>';
		if (text == '' || text == undefined){
			$('.write_list').remove();
		}else{
			$('.wenwen-footer').append(str);
			$('.write_list').css('bottom',footer_height);
		}
	}

	var wen  = document.getElementById('wenwen');
	function _touch_start(event){
        event.preventDefault();
        $('.wenwen_text').css('background','#c1c1c1');
        $('.wenwen_text span').css('color','#fff');
        $('.saying').show();
    }

    function _touch_end(event){
        event.preventDefault();
        $('.wenwen_text').css('background','#fff');
        $('.wenwen_text .circle-button').css('color','#666');    
        $('.saying').hide();
        var str  = '<div class="question">';
	        str += '<div class="heard_img right"><img src="images/dglvyou.jpg"></div>';
	        str += '<div class="question_text clear"><p>不好意思，我听不清！</p><i></i>';
	        str += '</div></div>';
		$('.speak_box').append(str);
		for_bottom();
        setTimeout(function(){
        	var ans  = '<div class="answer"><div class="heard_img left"><img src="images/dglvyou.jpg"></div>';
	        	ans += '<div class="answer_text"><p>我不知道你在说什么?</p><i></i>';
	    		ans += '</div></div>';
	    	$('.speak_box').append(ans);
			for_bottom();
        },1000);       
    }

    wen.addEventListener("touchstart", _touch_start, false);
    wen.addEventListener("touchend", _touch_end, false);
    
    function for_bottom(){
		var speak_height = $('.speak_box').height();
		$('.speak_box,.speak_window').animate({scrollTop:speak_height},500);
	}
	
	function autoWidth(){
		$('.question_text').css('max-width',$('.question').width()-60);
	}
	autoWidth();


//vioce
    $('.write div').on('click', function() {
        $('..wenwen-footer').css('display','none');
        $('footer div').css('display','block');
    });

// towrite
    function to_write(){
	    $('.write').css('display','block');
        $('footer div').css('display','none');
	    $('.towrite').attr('onclick','to_say()');
	    $('#writeinput').focus();
	    // for_bottom();
	}

	function to_say(){
		$('.write').css('display','none');
        $('footer div').css('display','block');
	    $('.towrite').attr('onclick','to_write()');
	}

    // function for_bottom(){
	// 	var speak_height = $('.speak_box').height();
	// 	$('.speak_box,.speak_window').animate({scrollTop:speak_height},500);
	// }
// 设备 快捷切换
    $('.frequent').on('click', function() {
        $('.device').css('display','none');
        $('.frequently').css('display','block');
    });
    $('.frequent').siblings().on('click', function() {
        $('.device').css('display','block');
        $('.frequently').css('display','none');
    });

// 底部切换
    function Tab(self) {
        $(self).addClass("indexcurrent").removeClass("footercolor").siblings().removeClass("indexcurrent").addClass("footercolor");                              
        var x = "#" + $(self).attr("xxx");
        $(x).removeClass("indexhide").siblings().addClass("indexhide");
    }
// swiper
    var mySwiper = new Swiper('#topNav', {
        freeMode: true,
        freeModeMomentumRatio: 0.5,
        slidesPerView: 'auto',   
    });   
    swiperWidth = mySwiper.container[0].clientWidth
    maxTranslate = mySwiper.maxTranslate();
    maxWidth = -maxTranslate + swiperWidth / 2    
    mySwiper.on('tap', function(swiper, e) {  

        slide = swiper.slides[swiper.clickedIndex]
        slideLeft = slide.offsetLeft
        slideWidth = slide.clientWidth
        slideCenter = slideLeft + slideWidth / 2
        mySwiper.setWrapperTransition(300)
        if (slideCenter < swiperWidth / 2) {		
            mySwiper.setWrapperTranslate(0)
        } else if (slideCenter > maxWidth) {	
            mySwiper.setWrapperTranslate(maxTranslate)
        } else {
            nowTlanslate = slideCenter - swiperWidth / 2
            mySwiper.setWrapperTranslate(-nowTlanslate)
        }
        $("#topNav .active").removeClass('active')
        $("#topNav .swiper-slide").eq(swiper.clickedIndex).addClass('active')
    }) 
    </script>    
</html>